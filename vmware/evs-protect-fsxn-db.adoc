---
sidebar: sidebar 
permalink: vmware/evs-protect-fsxn-db.html 
keywords: Amazon, AWS, EVS, Elastic VMware Service, ONTAP, FSx, iscsi 
summary: 'Esta seção aborda os passos para proteger bancos de dados em execução em VMDKs da VMware com SnapCenter for SQL (SCSQL).' 
---
= Procedimentos de proteção para bancos de dados executados em VMDKs da VMware com SnapCenter for SQL (SCSQL)
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
A seção a seguir mostra como proteger bancos de dados em execução em VMDKs da VMware com SnapCenter para SQL (SCSQL).



== Configurando o SCSQL

A configuração para usar SCSQL para proteger bancos de dados em VMDKs é a seguinte:

. link:https://docs.netapp.com/us-en/snapcenter/install/task_install_the_snapcenter_server_using_the_install_wizard.html["Instale e configure"] Servidor SnapCenter.
. Faça login no SnapCenter.
. Configurar o ambiente SnapCenter:
+
** link:https://docs.netapp.com/us-en/snapcenter/install/task_add_storage_systems.html["Adicionar ou atribuir"] conexões do sistema de storage.
** link:https://docs.netapp.com/us-en/snapcenter/install/concept_svm_connections_and_credentials.html["Criar"] credenciais.


. Para bancos de dados Microsoft SQL Server em VMDKs da VMware:
+
** link:https://docs.netapp.com/us-en/snapcenter/install/concept_svm_connections_and_credentials.html["Implantar SCV"] (já abordado na seção de configuração).
** Registre o plug-in com SnapCenter.


. Adicionar link:https://docs.netapp.com/us-en/snapcenter/protect-scsql/task_add_hosts_and_install_snapcenter_plug_ins_package_for_windows.html["Hosts do SQL Server e instalam plug-ins"]:
+
** link:https://docs.netapp.com/us-en/snapcenter/protect-scsql/task_add_hosts_and_install_snapcenter_plug_ins_package_for_windows.html["Configurar os plug-ins SQL"].
** link:https://docs.netapp.com/us-en/snapcenter/protect-scsql/task_create_backup_policies_for_sql_server_databases.html["Configure o plano de proteção e os agendamentos para o banco de dados e os logs"].
+
image:evs-protect-fsxn-027.png["Figura representando o diálogo para a etapa acima"]







== Configuração de uma política de backup

As etapas a seguir mostrarão como configurar uma política de backup.

. Selecione o banco de dados na guia de recursos e selecione "Proteger" no canto superior direito.
+

NOTE: As validações são realizadas em um banco de dados Microsoft SQL Server em execução na máquina virtual convidada.

+
image:evs-protect-fsxn-028.png["Figura representando o diálogo para a etapa acima"]

. Clique no ícone de sinal de mais para configurar uma política de backup do SQL Server.
+
image:evs-protect-fsxn-029.png["Figura representando o diálogo para a etapa acima"]

. Nesta demonstração, "Full backup" está selecionado. Selecione "Next" para continuar.
+
image:evs-protect-fsxn-030.png["Figura representando o diálogo para a etapa acima"]

. Na página Summary, selecione "Finish".
+
image:evs-protect-fsxn-031.png["Figura representando o diálogo para a etapa acima"]

. Prossiga para "Finish".
+
image:evs-protect-fsxn-032.png["Figura representando o diálogo para a etapa acima"]





== Monitorando um backup

Após configurar uma política de backup, você pode monitorar suas operações de backup à medida que ocorrem. Você pode fazer isso clicando em Backup now para acionar uma operação de backup sob demanda ou aguardando a sua política de backup agendada entrar em vigor.

. Monitore o progresso do trabalho usando "Monitor > Jobs".
. Selecione a tarefa de backup e clique em "Detalhes" para visualizar as informações da tarefa, conforme mostrado abaixo.
+
image:evs-protect-fsxn-033.png["Figura representando o diálogo para a etapa acima"]





== Restauração de bancos de dados residentes nos VMDKs

O banco de dados no VMDK pode ser restaurado para um ponto específico no tempo.

Podemos simular a importância disso excluindo algumas tabelas do seu banco de dados, que serão então corrigidas ao realizar uma restauração pontual.

Abaixo, você pode ver que várias tabelas do nosso banco de dados mostradas na primeira captura de tela foram excluídas na segunda captura de tela:

image:evs-protect-fsxn-034.png["Figura representando o diálogo para a etapa acima"]

image:evs-protect-fsxn-035.png["Figura representando o diálogo para a etapa acima"]

As etapas a seguir mostram como realizar uma restauração para recuperar essas tabelas excluídas:

. Selecione o banco de dados do grupo de recursos.
+
image:evs-protect-fsxn-036.png["Figura representando o diálogo para a etapa acima"]

. Na página Restore, selecione a opção "Restore the database to the same host where the backup was created".
+
image:evs-protect-fsxn-037.png["Figura representando o diálogo para a etapa acima"]

. Selecione a opção para usar um backup de log para um ponto específico no tempo.
+
image:evs-protect-fsxn-038.png["Figura representando o diálogo para a etapa acima"]

. Selecione "Sobrescrever banco de dados com o mesmo nome durante a restauração, criar backup do log de transações antes da restauração" e selecione "Avançar".
+
image:evs-protect-fsxn-039.png["Figura representando o diálogo para a etapa acima"]

. Selecione o estado pós-restauração que deseja que o banco de dados assuma nas opções da lista e selecione "Next".
+
image:evs-protect-fsxn-040.png["Figura representando o diálogo para a etapa acima"]

. Na página de resumo, selecione "Finish".
+
image:evs-protect-fsxn-041.png["Figura representando o diálogo para a etapa acima"]

. Monitore o trabalho até a conclusão.
+
image:evs-protect-fsxn-042.png["Figura representando o diálogo para a etapa acima"]

. Verifique se as tabelas excluídas foram restauradas com sucesso.
+
image:evs-protect-fsxn-043.png["Figura representando o diálogo para a etapa acima"]


