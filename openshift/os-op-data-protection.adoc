---
sidebar: sidebar 
permalink: openshift/os-op-data-protection.html 
keywords: NetApp Solutions, redhat OpenShift, red hat OpenShift, redhat openshift container platform, ocp, openshift container platform, Advanced Cluster Management, ACM, Hub Cluster, containers, container workloads, VMware, customer managed storage, ONTAP 
summary:  
---
= Proteção de dados usando Astra
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
Esta página mostra as opções de proteção de dados para aplicativos baseados em Red Hat OpenShift Container em execução no VMware vSphere usando Trident Protect (ACC).

À medida que os usuários avançam na jornada de modernização de seus aplicativos com o Red Hat OpenShift, uma estratégia de proteção de dados deve ser implementada para protegê-los contra exclusão acidental ou quaisquer outros erros humanos.  Muitas vezes, uma estratégia de proteção também é necessária para fins regulatórios ou de conformidade para proteger seus dados de um desastre.

Os requisitos de proteção de dados variam desde a reversão para uma cópia de um ponto no tempo até o failover automático para um domínio de falha diferente, sem qualquer intervenção humana.  Muitos clientes escolhem o ONTAP como sua plataforma de armazenamento preferida para seus aplicativos Kubernetes por causa de seus recursos avançados, como multilocação, multiprotocolo, ofertas de alto desempenho e capacidade, replicação e armazenamento em cache para locais de vários sites, segurança e flexibilidade.

A proteção de dados no ONTAP pode ser alcançada usando ad-hoc ou controlado por política - **Instantâneo** - **backup e restauração**

As cópias de instantâneo e os backups protegem os seguintes tipos de dados: - **Os metadados do aplicativo que representam o estado do aplicativo** - **Todos os volumes de dados persistentes associados ao aplicativo** - **Todos os artefatos de recursos pertencentes ao aplicativo**



== Instantâneo com ACC

Uma cópia de dados de um ponto no tempo pode ser capturada usando o Snapshot com ACC.  A política de proteção define o número de cópias do Snapshot a serem mantidas.  A opção mínima de horário disponível é por hora.  Cópias manuais de Snapshot sob demanda podem ser feitas a qualquer momento e em intervalos menores do que as cópias de Snapshot agendadas.  Cópias de instantâneos são armazenadas no mesmo volume provisionado que o aplicativo.



=== Configurando Snapshot com ACC

image:rhhc-onprem-dp-snap.png["Visualização instantânea do Trident Protect"]



== Backup e restauração com ACC

Um backup é baseado em um Snapshot.  O Trident Protect pode fazer cópias de Snapshot usando CSI e executar backup usando a cópia de Snapshot de um momento específico.  O backup é armazenado em um armazenamento de objetos externo (qualquer compatível com s3, incluindo ONTAP S3 em um local diferente).  A política de proteção pode ser configurada para backups agendados e o número de versões de backup a serem mantidas.  O RPO mínimo é de uma hora.



=== Restaurando um aplicativo de um backup usando ACC

O ACC restaura o aplicativo do bucket S3 onde os backups são armazenados.

image:rhhc-onprem-dp-br.png["Opção de restauração do Trident Protect"]



== Ganchos de execução específicos do aplicativo

Além disso, os ganchos de execução podem ser configurados para serem executados em conjunto com uma operação de proteção de dados de um aplicativo gerenciado.  Embora os recursos de proteção de dados em nível de matriz de armazenamento estejam disponíveis, muitas vezes são necessárias etapas adicionais para fazer backups e restaurações consistentes com o aplicativo.  As etapas adicionais específicas do aplicativo podem ser: - antes ou depois da criação de uma cópia do Snapshot.  - antes ou depois que um backup é criado.  - após restaurar a partir de uma cópia de Snapshot ou backup.

O Astra Control pode executar essas etapas específicas do aplicativo codificadas como scripts personalizados chamados ganchos de execução.

https://github.com/NetApp/Verda["Projeto NetApp Verda GitHub"]fornece ganchos de execução para aplicativos nativos de nuvem populares para tornar a proteção de aplicativos simples, robusta e fácil de orquestrar.  Sinta-se à vontade para contribuir com esse projeto se você tiver informações suficientes para um aplicativo que não esteja no repositório.



== Exemplo de gancho de execução para pré-instantâneo de um aplicativo Redis.

image:rhhc-onprem-dp-br-hook.png["Gancho de execução do Trident Protect"]



== Replicação com ACC

Para proteção regional ou para uma solução de baixo RPO e RTO, um aplicativo pode ser replicado para outra instância do Kubernetes em execução em um site diferente, de preferência em outra região.  O Trident Protect utiliza o SnapMirror assíncrono ONTAP com RPO de apenas 5 minutos.  A replicação é feita replicando para o ONTAP e, em seguida, um failover cria os recursos do Kubernetes no cluster de destino.


NOTE: Observe que a replicação é diferente do backup e restauração, onde o backup vai para o S3 e a restauração é executada a partir do S3.  Consulte o link: https://docs.netapp.com/us-en/astra-control-center/concepts/data-protection.html#replication-to-a-remote-cluster [aqui] para obter detalhes adicionais sobre as diferenças entre os dois tipos de proteção de dados.

Referirlink:https://docs.netapp.com/us-en/astra-control-center/use/replicate_snapmirror.html["aqui"] para obter instruções de configuração do SnapMirror .



=== SnapMirror com ACC

image:rhhc-onprem-dp-rep.png["Replicação do Trident Protect"]


NOTE: Os drivers de armazenamento san-economy e nas-economy não suportam o recurso de replicação.  Referirlink:https://docs.netapp.com/us-en/astra-control-center/get-started/requirements.html#astra-trident-requirements["aqui"] para obter detalhes adicionais.



=== Vídeo de demonstração:

link:https://www.netapp.tv/details/29504?mcid=35609780286441704190790628065560989458["Vídeo de demonstração de recuperação de desastres com Trident Protect"]

.Proteção de dados com Trident Protect
video::0cec0c90-4c6f-4018-9e4f-b09700eefb3a[panopto,width=360]


== Continuidade de negócios com MetroCluster

A maior parte da nossa plataforma de hardware para ONTAP tem recursos de alta disponibilidade para proteger contra falhas de dispositivos, evitando a necessidade de executar recuperação de desastres.  Mas para proteger contra incêndios ou qualquer outro desastre e continuar o negócio com RPO zero e RTO baixo, muitas vezes é usada uma solução MetroCluster .

Os clientes que atualmente têm um sistema ONTAP podem estender para o MetroCluster adicionando sistemas ONTAP suportados dentro das limitações de distância para fornecer recuperação de desastres em nível de zona.  O Trident, o CSI (Container Storage Interface), oferece suporte ao NetApp ONTAP , incluindo a configuração do MetroCluster , bem como outras opções como Cloud Volumes ONTAP, Azure NetApp Files, AWS FSx ONTAP, etc. O Trident fornece cinco opções de driver de armazenamento para ONTAP e todas são suportadas para a configuração do MetroCluster .  Referirlink:https://docs.netapp.com/us-en/trident/trident-use/backends.html["aqui"] para obter detalhes adicionais sobre drivers de armazenamento ONTAP suportados pelo Trident.

A solução MetroCluster requer extensão de rede de camada 2 ou capacidade de acessar o mesmo endereço de rede de ambos os domínios de falha.  Depois que a configuração do MetroCluster estiver pronta, a solução será transparente para os proprietários dos aplicativos, pois todos os volumes no svm do MetroCluster serão protegidos e obterão os benefícios do SyncMirror (RPO zero).

image:rhhc-onprem-dp-bc.png["Solução de Continuidade de Negócios com MetroCluster"]


TIP: Para a configuração de backend do Trident (TBC), não especifique o dataLIF e o SVM ao usar a configuração do MetroCluster .  Especifique o IP de gerenciamento do SVM para managementLIF e use as credenciais da função vsadmin.

Detalhes sobre os recursos de proteção de dados do Trident Protect estão disponíveislink:https://docs.netapp.com/us-en/astra-control-center/concepts/data-protection.html["aqui"]
