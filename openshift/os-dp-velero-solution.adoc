---
sidebar: sidebar 
permalink: openshift/os-dp-velero-solution.html 
keywords: OpenShift, OCP, Trident, NetApp ONTAP, Red Hat OpenShift, OADP operator, Openshift Data Protection Application operator, Velero, app data protection, Containers 
summary: Proteção de dados de aplicativos Red Hat OpenShift Container com NetApp ONTAP 
---
= Proteção de dados para aplicativos de contêiner na plataforma de contêiner OpenShift usando a API OpenShift para proteção de dados (OADP)
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
Esta seção do documento de referência fornece detalhes para criar backups de aplicativos de contêiner usando a API OpenShift para proteção de dados (OADP) com o Velero no NetApp ONTAP S3 ou NetApp StorageGRID S3.  Os backups de recursos com escopo de namespace, incluindo Volumes Persistentes (PVs) do aplicativo, são criados usando CSI Trident Snapshots.

O armazenamento persistente para aplicativos de contêiner pode ser apoiado pelo armazenamento ONTAP integrado ao OpenShift Cluster usandolink:https://docs.netapp.com/us-en/trident/["Trident CSI"] .  Nesta seção usamoslink:https://docs.openshift.com/container-platform/4.14/backup_and_restore/application_backup_and_restore/installing/installing-oadp-ocs.html["API OpenShift para Proteção de Dados (OADP)"] para realizar backup de aplicativos, incluindo seus volumes de dados para

* Armazenamento de objetos ONTAP
* StorageGrid


Em seguida, restauramos a partir do backup quando necessário.  Observe que o aplicativo só pode ser restaurado no cluster de onde o backup foi criado.

O OADP permite backup, restauração e recuperação de desastres de aplicativos em um cluster OpenShift.  Os dados que podem ser protegidos com OADP incluem objetos de recursos do Kubernetes, volumes persistentes e imagens internas.

image:redhat-openshift-oadp-001.png["API OpenShift para proteção de dados"]

O Red Hat OpenShift aproveitou as soluções desenvolvidas pelas comunidades OpenSource para proteção de dados. link:https://velero.io/["Velero"] é uma ferramenta de código aberto para fazer backup e restaurar com segurança, executar recuperação de desastres e migrar recursos de cluster e volumes persistentes do Kubernetes.  Para usar o Velero facilmente, a OpenShift desenvolveu o operador OADP e o plugin Velero para integração com os drivers de armazenamento CSI.  O núcleo das APIs OADP expostas são baseadas nas APIs Velero.  Após instalar o operador OADP e configurá-lo, as operações de backup/restauração que podem ser executadas são baseadas nas operações expostas pela API do Velero.

image:redhat-openshift-oadp-002.png["API OpenShift para proteção de dados"]

O OADP 1.3 está disponível no hub do operador do cluster OpenShift 4.12 e posteriores.  Ele tem um Data Mover integrado que pode mover instantâneos de volume CSI para um armazenamento de objetos remoto.  Isso proporciona portabilidade e durabilidade ao mover instantâneos para um local de armazenamento de objetos durante o backup.  Os instantâneos ficam então disponíveis para restauração após desastres.

**A seguir estão as versões dos vários componentes usados nos exemplos desta seção**

* Cluster OpenShift 4.14
* Operador OADP 1.13 fornecido pela Red Hat
* Velero CLI 1.13 para Linux
* Trident 24.02
* ONTAP 9.12
* postgresql instalado usando helm.


link:https://docs.netapp.com/us-en/trident/["Trident CSI"] link:https://docs.openshift.com/container-platform/4.14/backup_and_restore/application_backup_and_restore/installing/installing-oadp-ocs.html["API OpenShift para Proteção de Dados (OADP)"] link:https://velero.io/["Velero"]
